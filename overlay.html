<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Donation Overlay</title>
<style>
  body { margin:0; background:transparent; overflow:hidden; }
  .alert {
    position:absolute; top:50%; left:50%;
    transform:translate(-50%,-50%) scale(0.5);
    background:linear-gradient(135deg,#6d5dfc,#46c2ff);
    color:#fff; padding:20px 40px; border-radius:20px;
    font-size:1.8rem; font-weight:bold;
    opacity:0; pointer-events:none;
  }
  .show { animation:popIn 0.6s ease forwards; }
  @keyframes popIn {
    0%{transform:translate(-50%,-50%) scale(0.2);opacity:0;}
    60%{transform:translate(-50%,-50%) scale(1.2);opacity:1;}
    100%{transform:translate(-50%,-50%) scale(1);opacity:1;}
  }
</style>
</head>
<body>

<div id="alertBox" class="alert"></div>
<audio id="alertSound" preload="auto">
  <source src="alert.mp3" type="audio/mpeg">
</audio>

<script>
  const alertBox = document.getElementById("alertBox");
  const sound = document.getElementById("alertSound");
  let lastDonation = "";

  function showDonation(name, amount) {
    alertBox.textContent = `ðŸŽ‰ ${name} donated $${amount}! ðŸŽ‰`;
    alertBox.classList.add("show");
    sound.currentTime = 0; sound.play();
    setTimeout(() => alertBox.classList.remove("show"), 6000);
  }

  function checkDonation() {
    fetch("donation.json?cache=" + Date.now())
      .then(res => res.json())
      .then(data => {
        const key = data.name + data.amount;
        if (key !== lastDonation && data.amount) {
          lastDonation = key;
          showDonation(data.name, data.amount);
        }
      })
      .catch(err => console.log("waiting for donation.json..."));
  }

  setInterval(checkDonation, 2000);
</script>

</body>
</html>
